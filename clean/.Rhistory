'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
}
get_one_page(page)
get_one_page <- function(page) {
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
get_one_page(page)
album_dt <- NULL
get_one_page(page)
album_dt <- c()
get_one_page(page)
album_dt <- data.table('empty' = NULL)
get_one_page(page)
get_one_page <- function(my_url) {
page <- read_html(my_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
get_one_page("https://rateyourmusic.com/charts/top/album/all-time/")
rm( list = ls() )
album_dt <- NULL
get_one_page <- function(my_url) {
page <- read_html(my_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
get_one_page("https://rateyourmusic.com/charts/top/album/all-time/")
get_one_page <- function(page_url) {
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
my_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
get_one_page(my_url)
page_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
View(albums_dt)
rm( list = ls() )
page_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
get_one_page <- function(page_url) {
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
rm( list = ls() )
my_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
album_dt <- NULL
get_one_page <- function(page_url) {
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
album_dt <- get_one_page(my_url)
rm( list = ls() )
my_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
get_one_page <- function(page_url) {
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(album_dt)
}
album_dt <- get_one_page(my_url)
album_dt <- c()
album_dt <- get_one_page(my_url)
album_dt <- data.table()
album_dt <- get_one_page(my_url)
rm( list = ls() )
my_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
get_one_page <- function(page_url) {
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(albums_dt)
}
album_dt <- get_one_page(my_url)
View(album_dt)
pagenums  <- page %>% html_nodes(".ui_pagination_number") %>% html_text()
pagenums
page <- read_html(my_url)
pagenums  <- page %>% html_nodes(".ui_pagination_number") %>% html_text()
pagenums
length(pagenums)
pagenums[length(pagenums)]
gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , pagenums[length(pagenums)])))
last_page_num <- pagenums[length(pagenums)]
number_of_pages <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , last_page_num)))
number_of_pages
number_of_pages <- as.number(number_of_pages)
number_of_pages <- as.numeric(number_of_pages)
paste0(my_url , 1:number_of_pages , "#results")
list_of_urls <- paste0(my_url , 1:number_of_pages , "#results")
list_of_urls <- paste0(my_url , 1:number_of_pages , "/#results")
list_of_urls
dts_of_albums <- lapply(list_of_urls, get_one_page)
list_of_urls <- paste0(my_url , 1:5 , "/#results")
dts_of_albums <- lapply(list_of_urls, get_one_page)
list_of_urls <- paste0(my_url , 1:3 , "/#results")
dts_of_albums <- lapply(list_of_urls, get_one_page)
list_of_urls
list_of_urls <- paste0(my_url , 1:3 , "/#results")
dts_of_albums <- lapply(list_of_urls, get_one_page)
album_dt <- get_one_page("https://rateyourmusic.com/charts/top/album/all-time/3/#results")
album_dt <- get_one_page("https://rateyourmusic.com/charts/top/album/all-time/1/#results")
album_dt <- get_one_page("https://rateyourmusic.com/charts/top/album/all-time/")
album_dt <- get_one_page(my_url)
get_one_page <- function(page_url) {
page <- read_html(page_url)
album_rank <- page %>% html_nodes(".topcharts_position") %>% html_text()
album_name <- page %>% html_nodes(".release") %>% html_text()
album_creators <- page %>% html_nodes(".topcharts_item_artist") %>% html_text()
release_dates <- page %>% html_nodes(".topcharts_item_releasedate") %>% html_text()
release_dates <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , release_dates)))
main_genres <- page %>% html_nodes(".topcharts_item_genres_container") %>% html_text()
main_genres <- gsub("\\s+", " ",trimws(gsub("[\n]"  , "" , main_genres)))
avg_rating <- page %>% html_nodes(".topcharts_avg_rating_stat") %>% html_text()
number_of_ratings <- page %>% html_nodes(".topcharts_ratings_stat") %>% html_text()
number_of_reviews <- page %>% html_nodes(".topcharts_reviews_stat") %>% html_text()
album_url <- page %>% html_nodes(".release") %>% html_attr("href")
album_url <- paste0("https://rateyourmusic.com" , album_url)
albums_dt <- data.table('rank' = album_rank , 'name' = album_name ,
'artists' = album_creators , 'date' = release_dates ,
'genres' = main_genres , rating = avg_rating ,
'Nratings' = number_of_ratings ,
'Nreviews' = number_of_reviews ,
'link' = album_url)
return(albums_dt)
Sys.sleep(2)
}
album_dt <- get_one_page(my_url)
album_dt <- get_one_page(my_url)
album_dt <- get_one_page(my_url)
library(xml2)
library(rvest)
library(data.table)
album_dt <- get_one_page(my_url)
album_dt <- get_one_page(my_url)
my_url <- "https://rateyourmusic.com/charts/top/album/all-time/"
page <- read_html(my_url)
install.packages(c( 'gganimate', 'transformr', 'gifski'))
library(data.table)
library(ggplot2)
library(gganimate)
dt <- data.table(readRDS("C:/Users/abogn/Downloads/flats.rds"))
# colors
dt_all_conditions <- dt[ !is.na( Condition ) ]
dt_distrct_price <- dt[ , .("Average price" = mean( Price )) ,
by = District ][order(District)]
library(animation)
ani.options(interval = 1)
library(tidygeocoder)
geo(address = "Budapest XXI. ker端let"  , method = "osm", verbose = TRUE)
geocodes <- geocode(hotels, 'address')
districts <- paste0( "Budapest " , as.roman( 1 : 23 ) , ". ker端let" )
geocodes <- geocode(data.frame(districts) , 'districts')
library(ggmap)
library(ggmap)
map_data('get_stamenmap')
get_stamenmap()
ggmap(get_stamenmap())
bbox <- c(left = 18.97, bottom = 47.38, right = 19.27, top = 47.57)
get_stamenmap(center = c(19.040236, 47.497913), zoom = 13, crop = FALSE , maptype = "toner-2011",
style = 'feature:road|element:all|visibility:simplified&style=feature:administrative.locality|element:labels|visibility:off') %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = 5) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
get_stamenmap(center = c(19.040236, 47.497913), zoom = 10, crop = FALSE , maptype = "toner-2011",
style = 'feature:road|element:all|visibility:simplified&style=feature:administrative.locality|element:labels|visibility:off') %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = 5) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
get_stamenmap(bbox, zoom = 13, crop = FALSE , maptype = "toner-2011") %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = 5) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
get_stamenmap(center = c(19.040236, 47.497913), zoom = 10, crop = FALSE , maptype = "toner-2011",
style = 'feature:road|element:all|visibility:simplified&style=feature:administrative.locality|element:labels|visibility:off') %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = 5) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
get_stamenmap(center = c(19.040236, 47.497913), zoom = 10, crop = FALSE , maptype = "toner-2011",
style = 'feature:road|element:all|visibility:simplified&style=feature:administrative.locality|element:labels|visibility:off') %>% ggmap()
get_stamenmap(location = c(19.040236, 47.497913), zoom = 10, crop = FALSE , maptype = "toner-2011",
style = 'feature:road|element:all|visibility:simplified&style=feature:administrative.locality|element:labels|visibility:off') %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = 5) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
geocodes_city <- geocode(dt , 'districts')
geocodes_city <- geocode(dt , 'Street')
dt$Street
is.na(dt$Street)
library(ggmap)
sum(is.na(dt$Street))
dt <- dt[!(is.na(dt$Street))]
geocodes_city <- geocode(dt , 'Street')
dt$Street
geo(dt$Street[1])
geocodes_city <- geocode(dt , 'Street')
geocodes_city <- geocode(dt , 'Street')
View(dt_distrct_price)
districts <- paste0( "Budapest " , as.roman( 1 : 23 ) , ". ker端let" )
districts
districts_df <- data.frame('address' = districts , seq(1 , 23 , 1))
View(districts_df)
districts_df <- data.frame('address' = districts , District = seq(1 , 23 , 1))
districts_df <- data.frame('address' = districts , 'District' = seq(1 , 23 , 1))
dt <- merge(dt , data.table( districts_df ) , by =  'District' )
View(dt)
geocodes <- geocode(data.frame(districts) , 'districts')
library(tidygeocoder)
geocodes <- geocode(data.frame(districts) , 'districts')
data.frame(districts)
geocodes <- geocode(districts , 'districts')
geocodes <- geocode(districts , 'districts')
geocodes <- geocode(data.table(districts) , 'districts')
districts <- paste0( "Budapest " , as.roman( 1 : 23 ) , ". ker端let" )
geocodes <- geocode(data.table(districts) , 'districts')
geocodes <- geocode(data.frame(districts) , 'districts')
geocodes <- geocode(districts , 'districts')
districts
geocodes <- geocode(districts , 'districts')
View(geocodes)
View(geocodes)
dt[,.N , by = District]
merge( dt[,.N , by = District] , geocodes , by.x = 'District'  , by.y =  'districts' )
geocodes$District <- seq(1 , 23 , 1)
merge( dt[,.N , by = District] , geocodes , by = 'District'  )
geocodes <- merge( dt[,.N , by = District] , geocodes , by = 'District'  )
get_stamenmap(bbox, zoom = 13, crop = FALSE , maptype = "toner-2011") %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = N) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
get_stamenmap(bbox, zoom = 13, crop = FALSE , maptype = "toner-2011") %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = geocodes$N) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
View(districts_df)
geocodes <- merge( dt[, .( number_of_ap = N) , by = District] , geocodes , by = 'District'  )
geocodes <- merge( dt[, .( N = number_of_ap ) , by = District] , geocodes , by = 'District'  )
geocodes <- merge( dt[, .( .N = number_of_ap ) , by = District] , geocodes , by = 'District'  )
geocodes <- merge( dt[, .( number_of_ap = .N ) , by = District] , geocodes , by = 'District'  )
View(geocodes)
get_stamenmap(bbox, zoom = 13, crop = FALSE , maptype = "toner-2011") %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = number_of_ap) +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
get_stamenmap(bbox, zoom = 13, crop = FALSE , maptype = "toner-2011") %>% ggmap() +
geom_point(aes(x = long, y = lat) , data = geocodes , colour = "orange", size = 'number_of_ap') +
xlab('') + ylab('') +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
knitr::include_graphics("animation.gif")
library(data.table)
library(tidyverse)
library(ggmap)
library(tidygeocoder)
library(stringr)
library(kableExtra)
setwd("C:/Users/abogn/CEU/Study/dat_eng_one/Term_Project_1/clean")
dt_peaks <- data.table(fread("peaks.csv"))
dt_peaks[peak_name]
dt_peaks['peak_name']
dt_peaks[,'peak_name']
unique(dt_peaks[,'peak_name'])
geocodes <- geocode(dt_nether, `peak_name`)
geocodes <- geocode(dt_peaks, `peak_name`)
geocodes
View(geocodes)
geocode(dt_peaks, `peak_name`)
geocodes[!is.na(lat)]
geocodes[lat]
data.table(geocodes)[lat]
data.table(geocodes)[!is.na(lat)]
geocodes_lat <- data.table(geocodes)[!is.na(lat)]
bbox <- c(bottom = min(geocodes_lat$lat) ,
left = min(geocodes_lat$long) - 0.1,
top = max(geocodes_lat$lat) + 0.1,
right = max(geocodes_lat$long) + 0.1)
NE <- get_stamenmap(bbox, zoom = 10, crop = FALSE , maptype = "terrain-background")
bbox
dt_peaks[ , .( height_metres ) ]
summary(dt_peaks$height_metres)
dt_peaks[ height_metres > 7000 , .( height_metres ) ]
dt_peaks[ height_metres > 7500 , .( height_metres ) ]
dt_peaks[ height_metres > 8000 , .( height_metres ) ]
dt_peaks[ height_metres > 8000 , .( height_metres ,
'peak_name' = paste0( peak_name , Nepal ) ) ]
dt_peaks[ height_metres > 8000 , .( height_metres ,
'peak_name' = paste0( peak_name , 'Nepal' ) ) ]
dt_peaks[ height_metres > 8000 , .( height_metres ,
'peak_name' = paste0( peak_name , ' Nepal' ) ) ]
dt_peaks_temp <-  dt_peaks[ height_metres > 8000 , .( height_metres ,
'peak_name' = paste0( peak_name , ' Nepal' ) ) ]
geocodes <- geocode(dt_peaks_temp, 'peak_name')
geocodes
dt_peaks_temp <-  dt_peaks[ height_metres > 8000 , .( height_metres ,
peak_name ) ]
geocodes2 <- geocode(dt_peaks_temp, 'peak_name')
geocodes2
geocodes2 <- geocodes2[!is.na(lat) & lat > 28]
geocodes2[!is.na(lat) ]
geocodes2[!is.na(long) ]
geocodes2[long != NA ]
data.table(geocodes2)[!is.na(lat) & lat > 28]
data.table(geocodes2)[!is.na(lat) & lat > 27]
geocodes2 <- data.table(geocodes2)[!is.na(lat) & lat > 27]
bbox <- c(bottom = min(geocodes2$lat) ,
left = min(geocodes2$long) - 0.1,
top = max(geocodes2$lat) + 0.1,
right = max(geocodes2$long) + 0.1)
NE <- get_stamenmap(bbox, zoom = 10, crop = FALSE , maptype = "terrain-background")
ggmap(NE) +
geom_point( data = geocodes2 , aes( long , lat  ) ,
colour = "orange"  ) +
theme_void() + theme(legend.position = 'none')
ggmap(NE) +
geom_point( data = geocodes2 , aes( long , lat  ) ,
colour = "orange" , size = 10  ) +
theme_void() + theme(legend.position = 'none')
ggmap(NE) +
geom_point( data = geocodes2 , aes( long , lat  ) ,
colour = "orange" , size = 3  ) +
theme_void() + theme(legend.position = 'none')
bbox <- c(bottom = min(geocodes2$lat - 0.5) ,
left = min(geocodes2$long) - 0.05,
top = max(geocodes2$lat) + 0.5,
right = max(geocodes2$long) + 0.05)
NE <- get_stamenmap(bbox, zoom = 10, crop = FALSE , maptype = "terrain-background")
ggmap(NE) +
geom_point( data = geocodes2 , aes( long , lat  ) ,
colour = "orange" , size = 3  ) +
theme_void() + theme(legend.position = 'none')
